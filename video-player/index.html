<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>视频播放器</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    .video-player-warpper { position: relative; border: 1px solid #EAEAEA; }
    #video { width: 100%; height: 92vh; }
    .list-box { position: absolute; top: 0; right: 0; width: 40%; padding: 20px; max-height: 92vh; overflow: hidden auto; background-color: rgba(0,0,0,0.5);}
    .list-box .list-item { padding: 10px 0; color: #FFF; cursor: pointer; list-style: none; }
  </style>
</head>
<body>
  <div class="upload-file">
    <input type="file" id="file" webkitdirectory>
  </div>
  <div class="video-player-warpper">
    <video id="video" src="" width="100%" height="100%"></video>
    <div class="video-controls-warpper">
      <div class="slide-inner">
        <div class="slide-process"></div>
      </div>
      <div class="icon-play"></div>
      <div class="times"></div>
      <div class="audio-inner">
        <div class="icon-audio"></div>
        <div class="slide-inner">
          <div class="slide-process"></div>
        </div>
      </div>
      <div class="icon-menu"></div>
      <div class="icon-fullscreen"></div>
    </div>
    <div class="list-box">
      <ul class="list-inner"></ul>
    </div>
  </div>
  <script>
    const video_url = []
    window.onload = function () {
      const fileDom = document.getElementById('file')
      const videoInner = document.querySelector('.list-inner')
      let video_list_html = ''
      fileDom.onchange = async function (event) {
        const files = event.target.files
        for (let i = 0; i < files.length; i++) {
          const file = files[i]
          const reader = new FileReader()
          reader.readAsArrayBuffer(file)
          reader.onload = await function (event) {
            console.log(event.target.result)
            const buffer = event.target.result
            const url = URL.createObjectURL(file)
            video_url.push({ url: url, name: file.name })
            video_list_html += `<li class="list-item" data-url="${url}">${file.name}</li>`
            videoInner.innerHTML = video_list_html
          }
        }
        console.log(video_url)
      }
      videoInner.addEventListener('click', function (event) {
        console.log(event)
        if (event.target.nodeName === 'LI') {
          video.src = event.target.dataset.url
          video.controls = true
        }
      })
    }
  </script>
</body>
</html>