<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>通过关键字搜索图书列表</title>
</head>
<body>
  <h1>图书搜索</h1>
  <header>
    <input type="text" value="刘慈欣" class="search-inner">
    <input type="button" value="搜索" class="search-btn">
  </header>
  <main id="book_list"></main>
  <script>
    const search_inner = document.querySelector('.search-inner');
    const search_btn = document.querySelector('.search-btn');
    const book_list = document.querySelector('#book_list');

    search_btn.onclick = function () {
      const keyword = search_inner.value;
      if (keyword) {
        fetch(`https://book-db-v1.saltyleo.com?keyword=${keyword}`, {
          headers: {
            'Access-Control-Allow-Origin': '*',
            'Access-Control-Allow-Methods': 'GET',
            'Content-Type': 'application/json',
            'origin': '.saltyleo.com',
            'mode': 'no-cors'
          }
        }).then(res => res.json()).then(data => {
          let html = '';
          data.forEach(book => {
            html += `<div class="book-item">
              <img src="${book.cover}" />
              <p>${book.title}</p>
              <p>${book.author}</p>
              <p>${book.publisher}</p>
              <p>${book.intro}</p>
              <p>${book.price}</p>
              <p>${book.score}</p>
            </div>`
          })
          book_list.innerHTML = html;
        })
      }
    }
  </script>
</body>
</html>